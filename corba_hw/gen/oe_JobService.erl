%%------------------------------------------------------------
%%
%% Implementation stub file
%% 
%% Target: oe_JobService
%% Source: idl/JobService.idl
%% IC vsn: 4.2.27
%% 
%% This file is automatically generated. DO NOT EDIT IT.
%%
%%------------------------------------------------------------

-module(oe_JobService).
-ic_compiled("4_2_27").


-include_lib("orber/include/ifr_types.hrl").

%% Interface functions

-export([oe_register/0, oe_unregister/0, oe_get_module/5]).
-export([oe_dependency/0]).



oe_register() ->
    OE_IFR = orber_ifr:find_repository(),

    register_tests(OE_IFR),

    _OE_1 = oe_get_top_module(OE_IFR, "IDL:JobService:1.0", "JobService", "1.0"),

    orber_ifr:'ModuleDef_create_exception'(_OE_1, "IDL:JobService/HandlerNotRegistered:1.0", "HandlerNotRegistered", "1.0", []),

    _OE_2 = orber_ifr:'ModuleDef_create_interface'(_OE_1, "IDL:JobService/JobGeoDetails:1.0", "JobGeoDetails", "1.0", []),

    orber_ifr:'InterfaceDef_create_enum'(_OE_2, "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0", "CurrencyEnum", "1.0", ["kzt","usd","rub","gbp"]),

    orber_ifr:'InterfaceDef_create_enum'(_OE_2, "IDL:JobService/JobGeoDetails/CountryEnum:1.0", "CountryEnum", "1.0", ["kazakhstan","russia","great_britain","usa"]),

    orber_ifr:'ModuleDef_create_struct'(_OE_1, "IDL:JobService/job:1.0", "job", "1.0", [#structmember{name="title", type={tk_string,0}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_string,0})}, #structmember{name="salary", type=tk_ulong, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, tk_ulong)}, #structmember{name="currency", type={tk_enum,
                                     "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                     "CurrencyEnum",
                                     ["kzt","usd","rub","gbp"]}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_enum,
                                               "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                               "CurrencyEnum",
                                               ["kzt","usd","rub","gbp"]})}, #structmember{name="country", type={tk_enum,
                                       "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                       "CountryEnum",
                                       ["kazakhstan","russia","great_britain",
                                        "usa"]}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_enum,
                                               "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                               "CountryEnum",
                                               ["kazakhstan","russia",
                                                "great_britain","usa"]})}, #structmember{name="reqments", type={tk_sequence,{tk_string,146},4}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_sequence,{tk_string,146},4})}, #structmember{name="job_details", type={tk_sequence,{tk_string,146},4}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_sequence,{tk_string,146},4})}]),

    orber_ifr:'ModuleDef_create_alias'(_OE_1, "IDL:JobService/JobEntitiy:1.0", "JobEntitiy", "1.0", orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_struct,
                                               "IDL:JobService/job:1.0","job",
                                               [{"title",{tk_string,0}},
                                                {"salary",tk_ulong},
                                                {"currency",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                                  "CurrencyEnum",
                                                  ["kzt","usd","rub","gbp"]}},
                                                {"country",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                                  "CountryEnum",
                                                  ["kazakhstan","russia",
                                                   "great_britain","usa"]}},
                                                {"reqments",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}},
                                                {"job_details",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}}]})),

    orber_ifr:'ModuleDef_create_enum'(_OE_1, "IDL:JobService/Status:1.0", "Status", "1.0", ["success","fail"]),

    _OE_3 = orber_ifr:'ModuleDef_create_interface'(_OE_1, "IDL:JobService/JobHandler:1.0", "JobHandler", "1.0", []),

    orber_ifr:'InterfaceDef_create_attribute'(_OE_3, "IDL:JobService/JobHandler/hname:1.0", "hname", "1.0", orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_string,20}), 'ATTR_NORMAL'),

    _OE_4 = orber_ifr:'ModuleDef_create_interface'(_OE_1, "IDL:JobService/Submitable:1.0", "Submitable", "1.0", [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/JobHandler:1.0")]),

    orber_ifr:'InterfaceDef_create_operation'(_OE_4, "IDL:JobService/Submitable/submit_job:1.0", "submit_job", "1.0", orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_enum,
                                               "IDL:JobService/Status:1.0",
                                               "Status",
                                               ["success","fail"]}), 'OP_NORMAL', [#parameterdescription{name="JobCtx", type={tk_struct,
                                           "IDL:JobService/job:1.0","job",
                                           [{"title",{tk_string,0}},
                                            {"salary",tk_ulong},
                                            {"currency",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                              "CurrencyEnum",
                                              ["kzt","usd","rub","gbp"]}},
                                            {"country",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                              "CountryEnum",
                                              ["kazakhstan","russia",
                                               "great_britain","usa"]}},
                                            {"reqments",
                                             {tk_sequence,{tk_string,146},4}},
                                            {"job_details",
                                             {tk_sequence,
                                              {tk_string,146},
                                              4}}]}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_struct,
                                               "IDL:JobService/job:1.0","job",
                                               [{"title",{tk_string,0}},
                                                {"salary",tk_ulong},
                                                {"currency",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                                  "CurrencyEnum",
                                                  ["kzt","usd","rub","gbp"]}},
                                                {"country",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                                  "CountryEnum",
                                                  ["kazakhstan","russia",
                                                   "great_britain","usa"]}},
                                                {"reqments",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}},
                                                {"job_details",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}}]}), mode='PARAM_IN'}
], [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/HandlerNotRegistered:1.0")], []),

    _OE_5 = orber_ifr:'ModuleDef_create_interface'(_OE_1, "IDL:JobService/Validateable:1.0", "Validateable", "1.0", [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/JobHandler:1.0")]),

    orber_ifr:'InterfaceDef_create_operation'(_OE_5, "IDL:JobService/Validateable/validate_job:1.0", "validate_job", "1.0", orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_enum,
                                               "IDL:JobService/Status:1.0",
                                               "Status",
                                               ["success","fail"]}), 'OP_NORMAL', [#parameterdescription{name="JobCtx", type={tk_struct,
                                           "IDL:JobService/job:1.0","job",
                                           [{"title",{tk_string,0}},
                                            {"salary",tk_ulong},
                                            {"currency",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                              "CurrencyEnum",
                                              ["kzt","usd","rub","gbp"]}},
                                            {"country",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                              "CountryEnum",
                                              ["kazakhstan","russia",
                                               "great_britain","usa"]}},
                                            {"reqments",
                                             {tk_sequence,{tk_string,146},4}},
                                            {"job_details",
                                             {tk_sequence,
                                              {tk_string,146},
                                              4}}]}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_struct,
                                               "IDL:JobService/job:1.0","job",
                                               [{"title",{tk_string,0}},
                                                {"salary",tk_ulong},
                                                {"currency",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                                  "CurrencyEnum",
                                                  ["kzt","usd","rub","gbp"]}},
                                                {"country",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                                  "CountryEnum",
                                                  ["kazakhstan","russia",
                                                   "great_britain","usa"]}},
                                                {"reqments",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}},
                                                {"job_details",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}}]}), mode='PARAM_INOUT'}
], [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/HandlerNotRegistered:1.0")], []),

    _OE_6 = orber_ifr:'ModuleDef_create_interface'(_OE_1, "IDL:JobService/Processable:1.0", "Processable", "1.0", [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/JobHandler:1.0")]),

    orber_ifr:'InterfaceDef_create_operation'(_OE_6, "IDL:JobService/Processable/process_job:1.0", "process_job", "1.0", orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_enum,
                                               "IDL:JobService/Status:1.0",
                                               "Status",
                                               ["success","fail"]}), 'OP_NORMAL', [#parameterdescription{name="JobCtx", type={tk_struct,
                                           "IDL:JobService/job:1.0","job",
                                           [{"title",{tk_string,0}},
                                            {"salary",tk_ulong},
                                            {"currency",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                              "CurrencyEnum",
                                              ["kzt","usd","rub","gbp"]}},
                                            {"country",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                              "CountryEnum",
                                              ["kazakhstan","russia",
                                               "great_britain","usa"]}},
                                            {"reqments",
                                             {tk_sequence,{tk_string,146},4}},
                                            {"job_details",
                                             {tk_sequence,
                                              {tk_string,146},
                                              4}}]}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_struct,
                                               "IDL:JobService/job:1.0","job",
                                               [{"title",{tk_string,0}},
                                                {"salary",tk_ulong},
                                                {"currency",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                                  "CurrencyEnum",
                                                  ["kzt","usd","rub","gbp"]}},
                                                {"country",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                                  "CountryEnum",
                                                  ["kazakhstan","russia",
                                                   "great_britain","usa"]}},
                                                {"reqments",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}},
                                                {"job_details",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}}]}), mode='PARAM_INOUT'}
], [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/HandlerNotRegistered:1.0")], []),

    _OE_7 = orber_ifr:'ModuleDef_create_interface'(_OE_1, "IDL:JobService/Storeable:1.0", "Storeable", "1.0", [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/JobHandler:1.0")]),

    orber_ifr:'InterfaceDef_create_operation'(_OE_7, "IDL:JobService/Storeable/store_job:1.0", "store_job", "1.0", orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_enum,
                                               "IDL:JobService/Status:1.0",
                                               "Status",
                                               ["success","fail"]}), 'OP_NORMAL', [#parameterdescription{name="JobCtx", type={tk_struct,
                                           "IDL:JobService/job:1.0","job",
                                           [{"title",{tk_string,0}},
                                            {"salary",tk_ulong},
                                            {"currency",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                              "CurrencyEnum",
                                              ["kzt","usd","rub","gbp"]}},
                                            {"country",
                                             {tk_enum,
                                              "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                              "CountryEnum",
                                              ["kazakhstan","russia",
                                               "great_britain","usa"]}},
                                            {"reqments",
                                             {tk_sequence,{tk_string,146},4}},
                                            {"job_details",
                                             {tk_sequence,
                                              {tk_string,146},
                                              4}}]}, type_def=orber_ifr:'Repository_create_idltype'(OE_IFR, {tk_struct,
                                               "IDL:JobService/job:1.0","job",
                                               [{"title",{tk_string,0}},
                                                {"salary",tk_ulong},
                                                {"currency",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CurrencyEnum:1.0",
                                                  "CurrencyEnum",
                                                  ["kzt","usd","rub","gbp"]}},
                                                {"country",
                                                 {tk_enum,
                                                  "IDL:JobService/JobGeoDetails/CountryEnum:1.0",
                                                  "CountryEnum",
                                                  ["kazakhstan","russia",
                                                   "great_britain","usa"]}},
                                                {"reqments",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}},
                                                {"job_details",
                                                 {tk_sequence,
                                                  {tk_string,146},
                                                  4}}]}), mode='PARAM_IN'}
], [orber_ifr:lookup_id(OE_IFR,"IDL:JobService/HandlerNotRegistered:1.0")], []),

    ok.


%% General IFR registration checks.
register_tests(OE_IFR)->
  re_register_test(OE_IFR),
  include_reg_test(OE_IFR).


%% IFR type Re-registration checks.
re_register_test(OE_IFR)->
  case orber_ifr:'Repository_lookup_id'(OE_IFR,"IDL:JobService/HandlerNotRegistered:1.0") of
    []  ->
      true;
    _ ->
      exit({allready_registered,"IDL:JobService/HandlerNotRegistered:1.0"})
 end.


%% No included idl-files detected.
include_reg_test(_OE_IFR) -> true.


%% Fetch top module reference, register if unregistered.
oe_get_top_module(OE_IFR, ID, Name, Version) ->
  case orber_ifr:'Repository_lookup_id'(OE_IFR, ID) of
    [] ->
      orber_ifr:'Repository_create_module'(OE_IFR, ID, Name, Version);
    Mod  ->
      Mod
   end.

%% Fetch module reference, register if unregistered.
oe_get_module(OE_IFR, OE_Parent, ID, Name, Version) ->
  case orber_ifr:'Repository_lookup_id'(OE_IFR, ID) of
    [] ->
      orber_ifr:'ModuleDef_create_module'(OE_Parent, ID, Name, Version);
    Mod  ->
      Mod
   end.



oe_unregister() ->
    OE_IFR = orber_ifr:find_repository(),

    oe_destroy(OE_IFR, "IDL:JobService/Storeable:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/Processable:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/Validateable:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/Submitable:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/JobHandler:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/Status:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/JobEntitiy:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/job:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/JobGeoDetails:1.0"),
    oe_destroy(OE_IFR, "IDL:JobService/HandlerNotRegistered:1.0"),
    oe_destroy_if_empty(OE_IFR, "IDL:JobService:1.0"),
    ok.


oe_destroy_if_empty(OE_IFR,IFR_ID) ->
    case orber_ifr:'Repository_lookup_id'(OE_IFR, IFR_ID) of
	[] ->
	    ok;
	Ref ->
	    case orber_ifr:contents(Ref, 'dk_All', 'true') of
		[] ->
		    orber_ifr:destroy(Ref),
		    ok;
		_ ->
		    ok
	    end
    end.

oe_destroy(OE_IFR,IFR_ID) ->
    case orber_ifr:'Repository_lookup_id'(OE_IFR, IFR_ID) of
	[] ->
	    ok;
	Ref ->
	    orber_ifr:destroy(Ref),
	    ok
    end.



%% Idl file dependency list function
oe_dependency() ->

    [].

